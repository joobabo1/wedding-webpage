
/*! skrollr v0.5.14 https://github.com/Prinzhorn/skrollr | free to use under terms of MIT license */
(function(an,C,ae){function Z(au){B=C.documentElement,ag=C.body,c(),ap=this,au=au||{},K=au.constants||{};if(au.easing){for(var aw in au.easing){S[aw]=au.easing[aw]}}L={beforerender:au.beforerender,render:au.render},O=au.forceHeight!==!1,af=au.smoothScrolling!==!1,e={targetTop:ap.getScrollTop()},O&&(M=au.scale||1),m(B,[ac],[al]);if(O){var ax=C.getElementById("skrollr-body")||C.createElement("div"),at=ax.style;at.minWidth="1px",at.position="absolute",at.top=at.zIndex="0",ax.id||(at.width="1px",at.right="0",ag.appendChild(ax)),function(ay){J=function(){ay.apply(this,arguments),at.height=b+B.clientHeight+"px"}}(J)}return ap.refresh(),A.addEvent(an,"resize",J),function av(){p(av),z()}(),ap}var A=an.skrollr={get:function(){return ap},init:function(at){return ap||new Z(at)},VERSION:"0.5.14"},Y=Object.prototype.hasOwnProperty,B,ag,D="rendered",aj="un"+D,ao="skrollable",ac="skrollr",al="no-"+ac,ar="linear",ah=1000,am=200,E="start",ad="end",aq="top",H="center",ak="bottom",F="___has_rendered_class",V="___skrollable_id",p=an.requestAnimationFrame;(function(){var au=["ms","moz","webkit","o"],av;for(av=0;av<au.length&&!p;av++){p=an[au[av]+"RequestAnimationFrame"]}var at=0;p||(p=function(ax){var aw=x(),ay=Math.max(0,30-(aw-at));an.setTimeout(function(){ax(aw+ay)},ay),at=aw+ay})})();var G=/^\s*(.+)\s*$/m,r=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,j=/\s*([a-z\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,T=/^([a-z\-]+)\[(\w+)\]$/,ab=/-([a-z])/g,h=function(at,au){return au.toUpperCase()},R=/[\-+]?[\d]*\.?[\d]+/g,k=/\{\?\}/g,i=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,ai=/[a-z\-]+-gradient/g,U,l,c=function(){var au=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(an.getComputedStyle){var av=an.getComputedStyle(ag,null);for(var at in av){U=at.match(au)||+at==at&&av[at].match(au);if(U){break}}U&&(U=U[0],U.slice(0,1)==="-"?(l=U,U={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[U]):l="-"+U.toLowerCase()+"-")}},S={begin:function(){return 0},end:function(){return 1},linear:function(at){return at},quadratic:function(at){return at*at},cubic:function(at){return at*at*at},swing:function(at){return -Math.cos(at*Math.PI)/2+0.5},sqrt:function(at){return Math.sqrt(at)},bounce:function(at){var au;if(at<=0.5083){au=3}else{if(at<=0.8489){au=9}else{if(at<=0.96208){au=27}else{if(!(at<=0.99981)){return 1}au=91}}}return 1-Math.abs(3*Math.cos(at*au*1.028)/au)}};Z.prototype.refresh=function(ax){var aC,aD=!1;ax===ae?(aD=!0,aa=[],W=0,ax=C.getElementsByTagName("*")):ax=[].concat(ax);for(aC=0;aC<ax.length;aC++){var aH=ax[aC],au=aH,aG=[],av=af;if(!aH.attributes){continue}for(var aB=0;aB<aH.attributes.length;aB++){var ay=aH.attributes[aB];if(ay.name==="data-anchor-target"){au=C.querySelector(ay.value);if(au===null){throw'Unable to find anchor target "'+ay.value+'"'}continue}if(ay.name==="data-smooth-scrolling"){av=ay.value!=="off";continue}var aw=ay.name.match(r);if(aw!==null){var aA=aw[1];aA=aA&&K[aA.substr(1)]||0;var aJ=(aw[2]|0)+aA,at=aw[3],aM=aw[4]||at,aI={offset:aJ,props:ay.value,element:aH};aG.push(aI),!at||at===E||at===ad?(aI.mode="absolute",at===ad?aI.isEnd=!0:(aI.frame=aJ*M,delete aI.offset)):(aI.mode="relative",aI.anchors=[at,aM])}}if(aG.length){var aL,aE,aF;!aD&&V in aH?(aF=aH[V],aL=aa[aF].styleAttr,aE=aa[aF].classAttr):(aF=aH[V]=W++,aL=aH.style.cssText,aE=g(aH));var aK=aa[aF]={element:aH,styleAttr:aL,classAttr:aE,anchorTarget:au,keyFrames:aG,smoothScrolling:av};m(aH,[ao,D],[aj]),aK[F]=!0}}J();for(aC=0;aC<ax.length;aC++){var az=aa[ax[aC][V]];if(az===ae){continue}az.keyFrames.sort(y),o(az),I(az)}return ap},Z.prototype.relativeToAbsolute=function(ax,az,av){var ay=B.clientHeight,at=ax.getBoundingClientRect(),aw=at.top,au=at.bottom-at.top;return az===ak?aw-=ay:az===H&&(aw-=ay/2),av===ak?aw+=au:av===H&&(aw+=au/2),aw+=ap.getScrollTop(),aw+0.5|0},Z.prototype.animateTo=function(av,at){at=at||{};var aw=x(),au=ap.getScrollTop();return Q={startTop:au,topDiff:av-au,targetTop:av,duration:at.duration||ah,startTime:aw,endTime:aw+(at.duration||ah),easing:S[at.easing||ar],done:at.done},Q.topDiff||(Q.done&&Q.done.call(ap,!1),Q=ae),ap},Z.prototype.stopAnimateTo=function(){Q&&Q.done&&Q.done.call(ap,!0),Q=ae},Z.prototype.isAnimatingTo=function(){return !!Q},Z.prototype.setScrollTop=function(at){return A.iscroll?A.iscroll.scrollTo(0,-at):an.scrollTo(0,at),ap},Z.prototype.getScrollTop=function(){return A.iscroll?-A.iscroll.y:an.pageYOffset||B.scrollTop||ag.scrollTop||0},Z.prototype.on=function(at,au){return L[at]=au,ap},Z.prototype.off=function(at){return delete L[at],ap};var X=function(){var ax,au,az,aB,ay,at,aA,av,aw;for(at=0;at<aa.length;at++){ax=aa[at],au=ax.element,az=ax.anchorTarget,aB=ax.keyFrames;for(aA=0;aA<aB.length;aA++){ay=aB[aA],ay.mode==="relative"&&(av=au.style.cssText,aw=g(au),au.style.cssText=ax.styleAttr,m(au,ax.classAttr),ay.frame=ap.relativeToAbsolute(az,ay.anchors[0],ay.anchors[1])-ay.offset,au.style.cssText=av,m(au,aw)),O&&!ay.isEnd&&ay.frame>b&&(b=ay.frame)}}b=Math.max(b,f());for(at=0;at<aa.length;at++){ax=aa[at],aB=ax.keyFrames;for(aA=0;aA<aB.length;aA++){ay=aB[aA],ay.isEnd&&(ay.frame=b-ay.offset)}}},d=function(aE,aJ){for(var aA=0;aA<aa.length;aA++){var aG=aa[aA],aB=aG.smoothScrolling?aE:aJ,aF=aG.keyFrames,aw=aF[0].frame,ay=aF[aF.length-1].frame,au=aB<=aw,aD=aB>=ay,aC,at;if(au||aD){var az=aF[au?0:aF.length-1].props;for(aC in az){Y.call(az,aC)&&(at=t(az[aC].value),A.setStyle(aG.element,aC,at))}aG[F]&&(aB<aw||aB>ay)&&(m(aG.element,[aj],[D]),aG[F]=!1);continue}aG[F]||(m(aG.element,[D],[aj]),aG[F]=!0);for(var aI=0;aI<aF.length-1;aI++){if(aB>=aF[aI].frame&&aB<=aF[aI+1].frame){var av=aF[aI],ax=aF[aI+1];for(aC in av.props){if(Y.call(av.props,aC)){var aH=(aB-av.frame)/(ax.frame-av.frame);aH=av.props[aC].easing(aH),at=v(av.props[aC].value,ax.props[aC].value,aH),at=t(at),A.setStyle(aG.element,aC,at)}}break}}}},z=function(){var aw=ap.getScrollTop(),az,ax=x(),at;if(Q){ax>=Q.endTime?(aw=Q.targetTop,az=Q.done,Q=ae):(at=Q.easing((ax-Q.startTime)/Q.duration),aw=Q.startTop+at*Q.topDiff|0),ap.setScrollTop(aw)}else{var ay=e.targetTop-aw;ay&&(e={startTop:P,topDiff:aw-P,targetTop:aw,startTime:N,endTime:N+am}),ax<=e.endTime&&(at=S.sqrt((ax-e.startTime)/am),aw=e.startTop+at*e.topDiff|0)}aw<0&&(aw=0);if(n||P!==aw){q=aw>=P?"down":"up",n=!1;var av={curTop:aw,lastTop:P,maxTop:b,direction:q},au=L.beforerender&&L.beforerender.call(ap,av);au!==!1&&(d(aw,ap.getScrollTop()),P=aw,L.render&&L.render.call(ap,av)),az&&az.call(ap,!1)}N=ax},o=function(ax){for(var aA=0;aA<ax.keyFrames.length;aA++){var av=ax.keyFrames[aA],ay,at,az,aw={},au;while((au=j.exec(av.props))!==null){az=au[1],at=au[2],ay=az.match(T),ay!==null?(az=ay[1],ay=ay[2]):ay=ar,at=at.indexOf("!")?s(at):[at.slice(1)],aw[az]={value:at,easing:S[ay]}}av.props=aw}},s=function(at){var au=[];return i.lastIndex=0,at=at.replace(i,function(av){return av.replace(R,function(aw){return aw/255*100+"%"})}),l&&(ai.lastIndex=0,at=at.replace(ai,function(av){return l+av})),at=at.replace(R,function(av){return au.push(+av),"{?}"}),au.unshift(at),au},I=function(at){var au={},av;for(av=0;av<at.keyFrames.length;av++){u(at.keyFrames[av],au)}au={};for(av=at.keyFrames.length-1;av>=0;av--){u(at.keyFrames[av],au)}},u=function(at,au){var av;for(av in au){Y.call(at.props,av)||(at.props[av]=au[av])}for(av in at.props){au[av]=at.props[av]}},v=function(aw,at,av){if(aw.length!==at.length){throw"Can't interpolate between \""+aw[0]+'" and "'+at[0]+'"'}var ax=[aw[0]];for(var au=1;au<aw.length;au++){ax[au]=aw[au]+(at[au]-aw[au])*av}return ax},t=function(at){var au=1;return k.lastIndex=0,at[0].replace(k,function(){return at[au++]})};A.setStyle=function(aw,at,av){var ax=aw.style;at=at.replace(ab,h).replace("-","");if(at==="zIndex"){ax[at]=""+(av|0)}else{if(at==="float"){ax.styleFloat=ax.cssFloat=av}else{try{U&&(ax[U+at.slice(0,1).toUpperCase()+at.slice(1)]=av),ax[at]=av}catch(au){}}}},A.addEvent=function(at,av,aw){var au=function(ax){return ax=ax||an.event,ax.target||(ax.target=ax.srcElement),ax.preventDefault||(ax.preventDefault=function(){ax.returnValue=!1}),aw.call(this,ax)};an.addEventListener?at.addEventListener(av,au,!1):at.attachEvent("on"+av,au)};var J=function(){b=0,X(),n=!0,A.iscroll&&an.setTimeout(function(){A.iscroll.refresh()},0)},f=function(){var at=Math.max(ag.scrollHeight,ag.offsetHeight,B.scrollHeight,B.offsetHeight,B.clientHeight);return at-B.clientHeight},g=function(au){var at="className";return an.SVGElement&&au instanceof an.SVGElement&&(au=au[at],at="baseVal"),au[at]},m=function(ax,av,ay){var aw="className";an.SVGElement&&ax instanceof an.SVGElement&&(ax=ax[aw],aw="baseVal");if(ay===ae){ax[aw]=av;return}var au=ax[aw];for(var az=0;az<av.length;az++){w(au).indexOf(w(av[az]))===-1&&(au+=" "+av[az])}for(var at=0;at<ay.length;at++){au=w(au).replace(w(ay[at])," ")}ax[aw]=a(au)},a=function(at){return at.replace(G,"$1")},w=function(at){return" "+at+" "},x=Date.now||function(){return +(new Date)},y=function(at,au){return at.frame-au.frame},ap,aa,L,O,b=0,M=1,K,q="down",P=-1,N=x(),Q,af,e,n,W=0})(window,document);